<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî –ö–æ—Ç–æ—Ñ–∞–±—Ä–∏–∫–∞</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
  </head>
  <body class="app">
    <header class="app-header">
      <div class="container app-header__inner">
        <a class="brand" href="{% url 'home' %}"><span class="brand-icon">üêæ</span>–ö–æ—Ç–æ—Ñ–∞–±—Ä–∏–∫–∞</a>
        <nav class="app-header__nav" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
          <a class="app-header__link" href="{% url 'catalog' %}">–ö–∞—Ç–∞–ª–æ–≥</a>
        </nav>
        <div class="app-header__actions">
          <a class="secondary-btn" href="{% url 'builder' %}">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</a>
          <a class="ghost-btn ghost-btn--active" href="{% url 'cart' %}" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">üõí</a>
          <a class="ghost-btn" href="{% url 'profile' %}" aria-label="–ü—Ä–æ—Ñ–∏–ª—å">üë§</a>
        </div>
      </div>
    </header>

    <main class="section">
      <div class="container split-layout">
        <div class="panel">
          <span class="tag">–ö–æ—Ä–∑–∏–Ω–∞</span>
          <h2>–í–∞—à–∏ —Ç–æ–≤–∞—Ä—ã</h2>

          <!-- –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ -->
          {% if not cart_items %}
             <div style="margin-top: 20px;">
                 <p>–í –∫–æ—Ä–∑–∏–Ω–µ –ø—É—Å—Ç–æ.</p>
                 <a class="secondary-btn" href="{% url 'catalog' %}">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
             </div>
          {% else %}

          <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
          <div class="checkout-list" style="margin-top:28px;">
            {% for item in cart_items %}
            <div class="checkout-item">
              <!-- –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ç–æ–≤–∞—Ä–∞ -->
              <img class="checkout-thumb" src="{{ item.part.image.url }}" alt="{{ item.part.name }}" />
              <div>
                <h4>{{ item.part.name }}</h4>
                <!-- part_type_display –≤—ã–≤–æ–¥–∏—Ç "–ì–æ–ª–æ–≤–∞" –≤–º–µ—Å—Ç–æ "head" -->
                <p class="text-muted">{{ item.part.get_part_type_display }} ¬∑ {{ item.part.price }} ‚ÇΩ</p>
              </div>

              <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è (—Å—Å—ã–ª–∫–∞ –Ω–∞ view —É–¥–∞–ª–µ–Ω–∏—è) -->
              <a href="{% url 'remove_from_cart' item.id %}" class="remove-btn" aria-label="–£–¥–∞–ª–∏—Ç—å" style="text-decoration:none; display:flex; align-items:center; justify-content:center;">‚úï</a>
            </div>
            {% endfor %}
          </div>
          {% endif %}
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∏—Ç–æ–≥–æ–º -->
        {% if cart_items %}
        <div class="panel" style="align-self:start;">
          <h3>–ò—Ç–æ–≥</h3>
          <div class="checkout-list" style="margin-top:20px;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <span class="text-muted">–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∏—Ç–æ–≥</span>
              <span>{{ total_price }} ‚ÇΩ</span>
            </div>
            <!-- –°–∫–∏–¥–∫—É –ø–æ–∫–∞ —É–±—Ä–∞–ª–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã -->
            <div style="display:flex;justify-content:space-between;align-items:center; font-weight:bold; margin-top:10px;">
              <span>–ö –æ–ø–ª–∞—Ç–µ</span>
              <span>{{ total_price }} ‚ÇΩ</span>
            </div>
          </div>
          <a class="primary-btn" href="{% url 'checkout' %}">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é</a>
        </div>
        {% endif %}
      </div>
    </main>

    <script src="{% static 'java/main.js' %}"></script>
  </body>
</html>